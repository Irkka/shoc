#!/bin/bash

AWKPATH_ROOT=$(readlink -m "${BASH_SOURCE%/*}/../lib")

function build_awkpath() {
  awkpath_root=$1
  find $awkpath_root -type f -name '*.awk'|sed -r -e 's/(.+)(\/.*.awk$)/\1/g'|uniq|tr '\n' ':'|sed -r -e 's/(.+)(:$)/\1/g'
}

export AWKPATH=$(build_awkpath $AWKPATH_ROOT)
echo $AWKPATH

awk -f 'shoc.awk' "$(readlink -m ${BASH_SOURCE%/*}/../examples/example.sh)"
